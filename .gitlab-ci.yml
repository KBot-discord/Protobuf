workflow:
  rules:
    - if: $CI_PIPELINE_SOURCE == "merge_request_event"
      variables:
        TRIGGER_SOURCE: "merge"
      changes:
        - bot/**/*
        - youtube/**/*
    - if: $CI_COMMIT_BRANCH && $CI_OPEN_MERGE_REQUESTS
      when: never
    - if: $CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH
      variables:
        TRIGGER_SOURCE: "push"
      changes:
        - bot/**/*
        - youtube/**/*
    - when: never

stages:
  - triggers

bot:
  stage: triggers
  variables:
    SUB_DIR: bot
  trigger:
    include: .gitlab/templates/template.gitlab-ci.yml
    strategy: depend
  rules:
    - changes:
        - bot/**/*
    - when: never

youtube:
  stage: triggers
  variables:
    SUB_DIR: youtube
  trigger:
    include: .gitlab/templates/template.gitlab-ci.yml
    strategy: depend
  rules:
    - changes:
        - youtube/**/*
    - when: never
